# ==============================================================================
# SHARED CONFIGURATION (Used by both start_server and materials_description_gen.py)
# ==============================================================================

# Model configuration
# MODEL_NAME="Qwen/Qwen3-VL-30B-A3B-Instruct"
# Alternative models (uncomment to use):
MODEL_NAME="Qwen/Qwen3-VL-30B-A3B-Thinking"
# MODEL_NAME="QuantTrio/Qwen3-VL-30B-A3B-Instruct-AWQ"

# Server configuration
SERVER_HOST="0.0.0.0"
SERVER_PORT="8000"

# ==============================================================================
# VLLM SERVER SPECIFIC (start_server only)
# ==============================================================================

# Tensor parallelism (will default to GPU count if not set)
# TENSOR_PARALLEL_SIZE=""

# CUDA devices (will default to all available GPUs if not set)
# CUDA_DEVICES=""

# vLLM environment variables
VLLM_WORKER_MULTIPROC_METHOD="spawn"
VLLM_USE_FLASHINFER_MOE_FP16="1"
PYTORCH_CUDA_ALLOC_CONF="expandable_segments:True"

# vLLM model parameters
VLLM_MAX_MODEL_LEN="131072"
VLLM_MAX_NUM_SEQS="8"
VLLM_GPU_MEMORY_UTILIZATION="0.85"
VLLM_SEED="1234"
VLLM_MM_ENCODER_TP_MODE="data"
VLLM_ENABLE_EXPERT_PARALLEL="true"

# ==============================================================================
# MATERIALS DESCRIPTION GENERATOR SPECIFIC (materials_description_gen.py only)
# ==============================================================================

# API client configuration
API_BASE_URL=""
API_KEY="EMPTY"
API_TIMEOUT="3600"

# Generation parameters
GENERATION_TEMPERATURE="0.6"
GENERATION_TOP_P="0.95"
GENERATION_TOP_K="20"
GENERATION_PRESENCE_PENALTY="1.5"
GENERATION_MAX_TOKENS="4096"

# Batch processing
BATCH_SIZE="10"

# File paths
MATERIALS_DB_PATH="materials/processed_materials.db"
MATERIALS_DIR="materials/processed"

# Prompt template (optional, will use default if not set)
# PROMPT_TEMPLATE="Your custom prompt here..."

# Prompt templates for single-page and batch (optional)
# Single page: explicit JSON output with fields needed, key_concept, description
PROMPT_TEMPLATE_SINGLE="Return only a JSON object with fields exactly: needed (boolean), key_concept (string), description (string). Rules: needed=true only if the page teaches a substantive concept, method, worked example, or definition. Mark needed=false for pages that are: title/cover, course schedule/timeline, syllabus outline, table of contents, announcements, logistics (deadlines, office hours, emails), exam/quiz information, instructions to reflect/prepare, grading/policies, decorative/quote/blank pages, single-panel comics or cartoons, inspirational quotes, and high-level overview/agenda slides that summarize sections without teaching details. key_concept is a 2-6 word phrase naming the primary concept taught on this page; if multiple topics appear, choose the most central. description is 1-2 short sentences defining the concept and what a student needs to know to answer multiple-choice questions about it; keep under 40 words; plain text; no lists; ignore headers/footers and long OCR passages. There will be comics included, do not classify those as teaching materials. Output JSON only with no extra text."

# Batch: explicit JSON output with fields key_concept (array of 5 items) and description
PROMPT_TEMPLATE_BATCH="Return only a JSON object with fields exactly: key_concept (array of 5 strings), description (string). Do not include a needed field. The selected pages will already exclude administrative content (title, schedule, announcements, logistics, exam info, syllabus/TOC). Rules: key_concept must contain exactly five phrases (each 2-6 words) capturing the main concepts covered across the selected pages. description is 3-4 sentences summarizing the overall topic, key ideas, and typical problem types or skills assessed; concise, <=100 words; plain text; no bullets; avoid page-level details. Output JSON only with no extra text."

